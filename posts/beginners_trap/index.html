<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	
	<title>Ayush Subedi  | The Beginner&#39;s Trap in analytics</title>
	<meta name="viewport" content="width=device-width,minimum-scale=1">
	<meta name="generator" content="Hugo 0.128.2">
	
	
	<META NAME="ROBOTS" CONTENT="INDEX, FOLLOW">
	

	<meta name="title" content="Ayush Subedi">
	<meta name="description" content="… personal journey with mathematics, software engineering and data science">

	
	<meta property="og:type" content="website">
	<meta property="og:url" content="https://ayushsubedi.github.io/">
	<meta property="og:title" content="Ayush Subedi">
	<meta property="og:description" content="… personal journey with mathematics, software engineering and data science">
	<meta property="og:image" content="https://ayushsubedi.github.io/img/k.png">

	
	<meta property="twitter:card" content="summary_large_image">
	<meta property="twitter:url" content="https://ayushsubedi.github.io/">
	<meta property="twitter:title" content="Ayush Subedi">
	<meta property="twitter:description" content="… personal journey with mathematics, software engineering and data science">
	<meta property="twitter:image" content="https://ayushsubedi.github.io/img/k.png">

	
	
	<link href="/dist/app.css" rel="stylesheet">
	

	

	
	
<link rel="shortcut icon" href="/img/favicon.ico" type="image/png" />

	

	

	
	



<link rel="stylesheet" href='https://ayushsubedi.github.io/lib/katex.min.css' integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">


<script defer src='https://ayushsubedi.github.io/lib/katex.min.js' integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz" crossorigin="anonymous"></script>


<script defer src='https://ayushsubedi.github.io/lib/contrib/auto-render.min.js' integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI"
crossorigin="anonymous"
onload='renderMathInElement(document.body);'></script>


<script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement(document.body, {
            delimiters: [
                {left: "$$", right: "$$", display: true},
                {left: "$", right: "$", display: false}
            ]
        });
    });
</script>

	
	
</head>

<body class="bg-gray-100 text-gray-700 font-sans">
	<div class="p-6 sm:p-10 md:p-16 flex flex-wrap">
		<header class="w-full md:w-2/5 xl:w-1/2 md:pr-12 lg:pr-20 xl:pr-24 order-1 md:order-1 max-w-2xl">
			<div
				class="z-50 bg-gray-100 bg-opacity-75 bg-opacity-custom lg:min-w-0.7 max-w-xl md:float-right md:text-right leading-loose tracking-tight md:sticky md:top-0 pt-2">
				
<div>
	<h2>
		<a href="https://ayushsubedi.github.io/" title="Ayush Subedi" class="heading font-cursive icon">Ayush Subedi</a>
	</h2>
</div>
<h1 class="pt-2">The Beginner&#39;s Trap in analytics</h1>

<h3 class="text-java-700 font-normal leading-relaxed pt-2">The stages in the analytics process is filled with moments of success and failures. There are some instant gratifications during the process, where a begginer like myself might construe a non success as success, due to some kind of judgement error.</h3>

<div class="flex flex-wrap justify-end pt-2 "><div class="md:flex-grow-0 font-light">
	
	
	
	
	<a class="post-taxonomy-category text-medium-red-violet-600 hover:text-medium-red-violet-400"
		href='/categories/georgia-tech'>georgia tech</a>
	
	
	

	
	&nbsp;&nbsp;
	

	
	
	
	
	<a class="post-taxonomy-tag text-eucalyptus-500"
		href='/tags/cse-6040'>cse-6040</a>&nbsp;&#47;
	
	<a class="post-taxonomy-tag text-eucalyptus-500"
		href='/tags/analytics'>analytics</a>&nbsp;&#47;
	
	<a class="post-taxonomy-tag text-eucalyptus-500"
		href='/tags/eda'>eda</a>
	
	
	
</div><time class="text-eucalyptus-500 md:text-right md:flex-grow font-light pl-4"
		datetime="2021-12-10">2021-12-10</time>
</div>

<hr />

			</div>
		</header>
		<main role="main" class="w-full md:w-3/5 xl:w-1/2 max-w-3xl order-2 md:order-2 min-h-70vh pt-2 pb-4">
			

<article>
	<section class="mx-auto content">
		<div class="c-rich-text"><h1 id="the-beginners-trap">The Beginner&rsquo;s Trap</h1>
<p>The stages in the analytics process is filled with moments of success and failures. There are some instant gratifications during the process, where a begginer like myself might construe a non success as success, due to some kind of judgement error.</p>
<p>This project will go through one of those instances and discuss some of the things I need to keep in mind so that I (and people new to analytics) do not make these mistakes.</p>
<blockquote>
<p>The dataset is from <a href="https://www.kaggle.com/sanjeetsinghnaik/most-expensive-footballers-2021">https://www.kaggle.com/sanjeetsinghnaik/most-expensive-footballers-2021</a></p>
</blockquote>
<p>Since learning is a never ending process, I will be updating the notebook (or creating a variation of it) as I discover more best practices. So, consider this to be an excerise on SOTA (State of the art) POC (proof of concept).</p>
<p><strong>Steps involved:</strong></p>
<ol start="0">
<li>Introduction</li>
<li>Exploratory Data Analysis</li>
<li>Feature Engineering</li>
<li>Linear Regression</li>
<li>Decision Tree Regression</li>
<li>Validation</li>
<li>Conclusion</li>
</ol>
<h1 id="1-introduction">1. Introduction</h1>
<p>The description of the dataset from Kaggle:</p>
<blockquote>
<p>This file consists of data of Top 500 Most Expensive Footballer In 2021. The data is according to the prices listed in transfer market along with data like goals, assists, matches, age, etc.</p>
</blockquote>
<p>The question we are trying to answer is:</p>
<p>** Based on different predictors (goals, assists, matches, age etc.) is it possible to predict the market value of footballers? **</p>
<p><img src="https://storage.googleapis.com/kaggle-datasets-images/1766439/2883660/34d0db3584c1cff0b7695a9bc1fd9f0f/dataset-cover.png?t=2021-12-03-20-35-30" alt=""></p>
<p>The source of the image above is the Kaggle repository hosting the dataset.</p>
<h2 id="imports">Imports</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> pandas <span style="color:#66d9ef">as</span> pd
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> matplotlib.pyplot <span style="color:#66d9ef">as</span> plt
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> seaborn <span style="color:#66d9ef">as</span> sns
</span></span><span style="display:flex;"><span>sns<span style="color:#f92672">.</span>set(rc<span style="color:#f92672">=</span>{<span style="color:#e6db74">&#39;figure.figsize&#39;</span>:(<span style="color:#ae81ff">12</span>, <span style="color:#ae81ff">6</span>)})
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> matplotlib.ticker <span style="color:#f92672">import</span> MaxNLocator
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> numpy <span style="color:#66d9ef">as</span> np
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> sklearn.linear_model <span style="color:#f92672">import</span> LinearRegression
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> sklearn.tree <span style="color:#f92672">import</span> DecisionTreeRegressor
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> sklearn.model_selection <span style="color:#f92672">import</span> cross_val_score
</span></span></code></pre></div><p>The dataset is in the file players_data.csv</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>read_csv(<span style="color:#e6db74">&#39;players_data.csv&#39;</span>)
</span></span></code></pre></div><p>Let us take a look at the columns. We have a few ways of doing this but I always found using <code>list</code> easy.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>list(df)
</span></span></code></pre></div><pre><code>['Name',
 'Position',
 'Age',
 'Markey Value In Millions(£)',
 'Country',
 'Club',
 'Matches',
 'Goals',
 'Own Goals',
 'Assists',
 'Yellow Cards',
 'Second Yellow Cards',
 'Red Cards',
 'Number Of Substitute In',
 'Number Of Substitute Out']
</code></pre>
<p>Since we know the dataset is a ranking of 500 highest paid footballers, the expected rows should be 500. And the number of columns is 15</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df<span style="color:#f92672">.</span>shape
</span></span></code></pre></div><pre><code>(500, 15)
</code></pre>
<p>Let&rsquo;s look at the first few rows.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df<span style="color:#f92672">.</span>head()
</span></span></code></pre></div><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Name</th>
      <th>Position</th>
      <th>Age</th>
      <th>Markey Value In Millions(£)</th>
      <th>Country</th>
      <th>Club</th>
      <th>Matches</th>
      <th>Goals</th>
      <th>Own Goals</th>
      <th>Assists</th>
      <th>Yellow Cards</th>
      <th>Second Yellow Cards</th>
      <th>Red Cards</th>
      <th>Number Of Substitute In</th>
      <th>Number Of Substitute Out</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Kylian Mbappé</td>
      <td>Centre-Forward</td>
      <td>22</td>
      <td>144.0</td>
      <td>France</td>
      <td>Paris Saint-Germain</td>
      <td>16</td>
      <td>7</td>
      <td>0</td>
      <td>11</td>
      <td>3</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>8</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Erling Haaland</td>
      <td>Centre-Forward</td>
      <td>21</td>
      <td>135.0</td>
      <td>Norway</td>
      <td>Borussia Dortmund</td>
      <td>10</td>
      <td>13</td>
      <td>0</td>
      <td>4</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Harry Kane</td>
      <td>Centre-Forward</td>
      <td>28</td>
      <td>108.0</td>
      <td>England</td>
      <td>Tottenham Hotspur</td>
      <td>16</td>
      <td>7</td>
      <td>0</td>
      <td>2</td>
      <td>2</td>
      <td>0</td>
      <td>0</td>
      <td>2</td>
      <td>2</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Jack Grealish</td>
      <td>Left Winger</td>
      <td>26</td>
      <td>90.0</td>
      <td>England</td>
      <td>Manchester City</td>
      <td>15</td>
      <td>2</td>
      <td>0</td>
      <td>3</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>2</td>
      <td>8</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Mohamed Salah</td>
      <td>Right Winger</td>
      <td>29</td>
      <td>90.0</td>
      <td>Egypt</td>
      <td>Liverpool FC</td>
      <td>15</td>
      <td>15</td>
      <td>0</td>
      <td>6</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>3</td>
    </tr>
  </tbody>
</table>
</div>
<p>Let&rsquo;s look at the last few rows.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df<span style="color:#f92672">.</span>tail()
</span></span></code></pre></div><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Name</th>
      <th>Position</th>
      <th>Age</th>
      <th>Markey Value In Millions(£)</th>
      <th>Country</th>
      <th>Club</th>
      <th>Matches</th>
      <th>Goals</th>
      <th>Own Goals</th>
      <th>Assists</th>
      <th>Yellow Cards</th>
      <th>Second Yellow Cards</th>
      <th>Red Cards</th>
      <th>Number Of Substitute In</th>
      <th>Number Of Substitute Out</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>495</th>
      <td>Giorgian de Arrascaeta</td>
      <td>Attacking Midfield</td>
      <td>27</td>
      <td>16.2</td>
      <td>Uruguay</td>
      <td>Clube de Regatas do Flamengo</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>496</th>
      <td>Ayoze Pérez</td>
      <td>Second Striker</td>
      <td>28</td>
      <td>16.2</td>
      <td>Spain</td>
      <td>Leicester City</td>
      <td>8</td>
      <td>1</td>
      <td>0</td>
      <td>3</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>2</td>
      <td>5</td>
    </tr>
    <tr>
      <th>497</th>
      <td>Alex Meret</td>
      <td>Goalkeeper</td>
      <td>24</td>
      <td>16.2</td>
      <td>Italy</td>
      <td>SSC Napoli</td>
      <td>5</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>498</th>
      <td>Duje Caleta-Car</td>
      <td>Centre-Back</td>
      <td>25</td>
      <td>16.2</td>
      <td>Croatia</td>
      <td>Olympique Marseille</td>
      <td>8</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>2</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>2</td>
    </tr>
    <tr>
      <th>499</th>
      <td>Aritz Elustondo</td>
      <td>Centre-Back</td>
      <td>27</td>
      <td>16.2</td>
      <td>Spain</td>
      <td>Real Sociedad</td>
      <td>15</td>
      <td>3</td>
      <td>0</td>
      <td>1</td>
      <td>4</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div>
<h1 id="2-exploratory-data-analysis">2. Exploratory Data Analysis</h1>
<p>Let&rsquo;s use Pandas built in function to generate descriptive statistics</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df<span style="color:#f92672">.</span>describe()
</span></span></code></pre></div><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Age</th>
      <th>Markey Value In Millions(£)</th>
      <th>Matches</th>
      <th>Goals</th>
      <th>Own Goals</th>
      <th>Assists</th>
      <th>Yellow Cards</th>
      <th>Second Yellow Cards</th>
      <th>Red Cards</th>
      <th>Number Of Substitute In</th>
      <th>Number Of Substitute Out</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>500.000000</td>
      <td>500.000000</td>
      <td>500.000000</td>
      <td>500.000000</td>
      <td>500.000000</td>
      <td>500.00000</td>
      <td>500.000000</td>
      <td>500.000000</td>
      <td>500.000000</td>
      <td>500.000000</td>
      <td>500.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>24.968000</td>
      <td>31.537800</td>
      <td>12.396000</td>
      <td>2.160000</td>
      <td>0.030000</td>
      <td>1.51200</td>
      <td>1.592000</td>
      <td>0.036000</td>
      <td>0.046000</td>
      <td>2.394000</td>
      <td>3.744000</td>
    </tr>
    <tr>
      <th>std</th>
      <td>3.165916</td>
      <td>17.577697</td>
      <td>4.342453</td>
      <td>2.880102</td>
      <td>0.170758</td>
      <td>1.85276</td>
      <td>1.445585</td>
      <td>0.186477</td>
      <td>0.209695</td>
      <td>2.517825</td>
      <td>3.293046</td>
    </tr>
    <tr>
      <th>min</th>
      <td>16.000000</td>
      <td>16.200000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.00000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>23.000000</td>
      <td>19.800000</td>
      <td>10.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.00000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>1.000000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>25.000000</td>
      <td>25.200000</td>
      <td>13.000000</td>
      <td>1.000000</td>
      <td>0.000000</td>
      <td>1.00000</td>
      <td>1.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>2.000000</td>
      <td>3.000000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>27.000000</td>
      <td>36.000000</td>
      <td>16.000000</td>
      <td>3.000000</td>
      <td>0.000000</td>
      <td>2.00000</td>
      <td>2.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>3.250000</td>
      <td>6.000000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>36.000000</td>
      <td>144.000000</td>
      <td>24.000000</td>
      <td>23.000000</td>
      <td>1.000000</td>
      <td>12.00000</td>
      <td>7.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>13.000000</td>
      <td>20.000000</td>
    </tr>
  </tbody>
</table>
</div>
<p>Let us look into the data types for each of the columns</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df<span style="color:#f92672">.</span>info()
</span></span></code></pre></div><pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 500 entries, 0 to 499
Data columns (total 15 columns):
 #   Column                       Non-Null Count  Dtype  
---  ------                       --------------  -----  
 0   Name                         500 non-null    object 
 1   Position                     500 non-null    object 
 2   Age                          500 non-null    int64  
 3   Markey Value In Millions(£)  500 non-null    float64
 4   Country                      500 non-null    object 
 5   Club                         500 non-null    object 
 6   Matches                      500 non-null    int64  
 7   Goals                        500 non-null    int64  
 8   Own Goals                    500 non-null    int64  
 9   Assists                      500 non-null    int64  
 10  Yellow Cards                 500 non-null    int64  
 11  Second Yellow Cards          500 non-null    int64  
 12  Red Cards                    500 non-null    int64  
 13  Number Of Substitute In      500 non-null    int64  
 14  Number Of Substitute Out     500 non-null    int64  
dtypes: float64(1), int64(10), object(4)
memory usage: 58.7+ KB
</code></pre>
<p>Count of missing values</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df<span style="color:#f92672">.</span>isna()<span style="color:#f92672">.</span>sum()
</span></span></code></pre></div><pre><code>Name                           0
Position                       0
Age                            0
Markey Value In Millions(£)    0
Country                        0
Club                           0
Matches                        0
Goals                          0
Own Goals                      0
Assists                        0
Yellow Cards                   0
Second Yellow Cards            0
Red Cards                      0
Number Of Substitute In        0
Number Of Substitute Out       0
dtype: int64
</code></pre>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df<span style="color:#f92672">.</span>isna()<span style="color:#f92672">.</span>sum()<span style="color:#f92672">.</span>sum()
</span></span></code></pre></div><pre><code>0
</code></pre>
<p>We do not have any values missing from the dataset.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df<span style="color:#f92672">.</span>groupby(<span style="color:#e6db74">&#39;Club&#39;</span>)<span style="color:#f92672">.</span>size()<span style="color:#f92672">.</span>sort_values(ascending<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>)<span style="color:#f92672">.</span>head(<span style="color:#ae81ff">10</span>)
</span></span></code></pre></div><pre><code>Club
Manchester United      19
Manchester City        18
Chelsea FC             16
Tottenham Hotspur      16
Real Madrid            16
Paris Saint-Germain    16
RB Leipzig             15
Arsenal FC             15
Liverpool FC           15
Atlético de Madrid     15
dtype: int64
</code></pre>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>ax <span style="color:#f92672">=</span> sns<span style="color:#f92672">.</span>countplot(x<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Club&#39;</span>, data<span style="color:#f92672">=</span>df, order<span style="color:#f92672">=</span>df<span style="color:#f92672">.</span>Club<span style="color:#f92672">.</span>value_counts()<span style="color:#f92672">.</span>iloc[:<span style="color:#ae81ff">10</span>]<span style="color:#f92672">.</span>index) 
</span></span><span style="display:flex;"><span>ax<span style="color:#f92672">.</span>tick_params(axis<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;x&#39;</span>, rotation<span style="color:#f92672">=</span><span style="color:#ae81ff">45</span>)
</span></span><span style="display:flex;"><span>ax<span style="color:#f92672">.</span>yaxis<span style="color:#f92672">.</span>set_major_locator(MaxNLocator(integer<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>))
</span></span><span style="display:flex;"><span>ax<span style="color:#f92672">.</span>set(xlabel<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Club&#39;</span>, ylabel<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Count of players&#39;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>title(<span style="color:#e6db74">&#34;Top 10 Clubs based on player representation (count)&#34;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>show()
</span></span></code></pre></div><p><img src="/img/output_29_0.png" alt="png"></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>club_grouped <span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>groupby([<span style="color:#e6db74">&#39;Club&#39;</span>])[[<span style="color:#e6db74">&#39;Markey Value In Millions(£)&#39;</span>]]<span style="color:#f92672">.</span>sum()<span style="color:#f92672">.</span>sort_values(by<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Markey Value In Millions(£)&#39;</span>, ascending<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>)<span style="color:#f92672">.</span>head(<span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span>club_grouped
</span></span></code></pre></div><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Markey Value In Millions(£)</th>
    </tr>
    <tr>
      <th>Club</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Manchester City</th>
      <td>940.5</td>
    </tr>
    <tr>
      <th>Paris Saint-Germain</th>
      <td>775.8</td>
    </tr>
    <tr>
      <th>Manchester United</th>
      <td>760.5</td>
    </tr>
    <tr>
      <th>Chelsea FC</th>
      <td>709.2</td>
    </tr>
    <tr>
      <th>Bayern Munich</th>
      <td>685.8</td>
    </tr>
    <tr>
      <th>Liverpool FC</th>
      <td>681.3</td>
    </tr>
    <tr>
      <th>Atlético de Madrid</th>
      <td>616.5</td>
    </tr>
    <tr>
      <th>Real Madrid</th>
      <td>594.0</td>
    </tr>
    <tr>
      <th>Tottenham Hotspur</th>
      <td>536.4</td>
    </tr>
    <tr>
      <th>Juventus FC</th>
      <td>450.0</td>
    </tr>
  </tbody>
</table>
</div>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>ax <span style="color:#f92672">=</span> sns<span style="color:#f92672">.</span>barplot(x<span style="color:#f92672">=</span>club_grouped<span style="color:#f92672">.</span>index, y<span style="color:#f92672">=</span>club_grouped[<span style="color:#e6db74">&#39;Markey Value In Millions(£)&#39;</span>]) 
</span></span><span style="display:flex;"><span>ax<span style="color:#f92672">.</span>tick_params(axis<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;x&#39;</span>, rotation<span style="color:#f92672">=</span><span style="color:#ae81ff">45</span>)
</span></span><span style="display:flex;"><span>ax<span style="color:#f92672">.</span>set(xlabel<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Club&#39;</span>, ylabel<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Markey Value In Millions(£)&#39;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>title(<span style="color:#e6db74">&#34;Top 10 Clubs based on total market value&#34;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>show()
</span></span></code></pre></div><p><img src="/img/output_31_0.png" alt="png"></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df<span style="color:#f92672">.</span>groupby(<span style="color:#e6db74">&#39;Country&#39;</span>)<span style="color:#f92672">.</span>size()<span style="color:#f92672">.</span>sort_values(ascending<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>)<span style="color:#f92672">.</span>head(<span style="color:#ae81ff">10</span>)
</span></span></code></pre></div><pre><code>Country
England        67
France         58
Spain          52
Brazil         41
Germany        29
Portugal       26
Italy          26
Argentina      22
Netherlands    17
Belgium        14
dtype: int64
</code></pre>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>ax <span style="color:#f92672">=</span> sns<span style="color:#f92672">.</span>countplot(x<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Country&#39;</span>, data<span style="color:#f92672">=</span>df, order<span style="color:#f92672">=</span>df<span style="color:#f92672">.</span>Country<span style="color:#f92672">.</span>value_counts()<span style="color:#f92672">.</span>iloc[:<span style="color:#ae81ff">10</span>]<span style="color:#f92672">.</span>index) 
</span></span><span style="display:flex;"><span>ax<span style="color:#f92672">.</span>tick_params(axis<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;x&#39;</span>, rotation<span style="color:#f92672">=</span><span style="color:#ae81ff">45</span>)
</span></span><span style="display:flex;"><span>ax<span style="color:#f92672">.</span>yaxis<span style="color:#f92672">.</span>set_major_locator(MaxNLocator(integer<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>))
</span></span><span style="display:flex;"><span>ax<span style="color:#f92672">.</span>set(xlabel<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Country&#39;</span>, ylabel<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Count of players&#39;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>title(<span style="color:#e6db74">&#34;Top 10 Country based on player representation (count)&#34;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>show()
</span></span></code></pre></div><p><img src="/img/output_33_0.png" alt="png"></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>country_grouped <span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>groupby([<span style="color:#e6db74">&#39;Country&#39;</span>])[[<span style="color:#e6db74">&#39;Markey Value In Millions(£)&#39;</span>]]<span style="color:#f92672">.</span>sum()<span style="color:#f92672">.</span>sort_values(by<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Markey Value In Millions(£)&#39;</span>, ascending<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>)<span style="color:#f92672">.</span>head(<span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span>country_grouped
</span></span></code></pre></div><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Markey Value In Millions(£)</th>
    </tr>
    <tr>
      <th>Country</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>England</th>
      <td>2248.2</td>
    </tr>
    <tr>
      <th>France</th>
      <td>1895.4</td>
    </tr>
    <tr>
      <th>Spain</th>
      <td>1565.1</td>
    </tr>
    <tr>
      <th>Brazil</th>
      <td>1275.3</td>
    </tr>
    <tr>
      <th>Germany</th>
      <td>1005.3</td>
    </tr>
    <tr>
      <th>Portugal</th>
      <td>890.1</td>
    </tr>
    <tr>
      <th>Italy</th>
      <td>854.1</td>
    </tr>
    <tr>
      <th>Argentina</th>
      <td>650.7</td>
    </tr>
    <tr>
      <th>Netherlands</th>
      <td>571.5</td>
    </tr>
    <tr>
      <th>Belgium</th>
      <td>522.9</td>
    </tr>
  </tbody>
</table>
</div>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>ax <span style="color:#f92672">=</span> sns<span style="color:#f92672">.</span>barplot(x<span style="color:#f92672">=</span>country_grouped<span style="color:#f92672">.</span>index, y<span style="color:#f92672">=</span>country_grouped[<span style="color:#e6db74">&#39;Markey Value In Millions(£)&#39;</span>]) 
</span></span><span style="display:flex;"><span>ax<span style="color:#f92672">.</span>tick_params(axis<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;x&#39;</span>, rotation<span style="color:#f92672">=</span><span style="color:#ae81ff">45</span>)
</span></span><span style="display:flex;"><span>ax<span style="color:#f92672">.</span>set(xlabel<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Country&#39;</span>, ylabel<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Markey Value In Millions(£)&#39;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>title(<span style="color:#e6db74">&#34;Top 10 Country based on total market value&#34;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>show()
</span></span></code></pre></div><p><img src="/img/output_35_0.png" alt="png"></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df<span style="color:#f92672">.</span>groupby(<span style="color:#e6db74">&#39;Position&#39;</span>)<span style="color:#f92672">.</span>size()<span style="color:#f92672">.</span>sort_values(ascending<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>)
</span></span></code></pre></div><pre><code>Position
Centre-Back           87
Central Midfield      74
Centre-Forward        70
Right Winger          48
Left Winger           46
Attacking Midfield    41
Defensive Midfield    41
Right-Back            30
Left-Back             23
Goalkeeper            19
Left Midfield          8
Second Striker         8
Right Midfield         5
dtype: int64
</code></pre>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>ax <span style="color:#f92672">=</span> sns<span style="color:#f92672">.</span>countplot(x<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Position&#39;</span>, data<span style="color:#f92672">=</span>df, order<span style="color:#f92672">=</span>df<span style="color:#f92672">.</span>Position<span style="color:#f92672">.</span>value_counts()<span style="color:#f92672">.</span>iloc[:<span style="color:#ae81ff">10</span>]<span style="color:#f92672">.</span>index) 
</span></span><span style="display:flex;"><span>ax<span style="color:#f92672">.</span>tick_params(axis<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;x&#39;</span>, rotation<span style="color:#f92672">=</span><span style="color:#ae81ff">45</span>)
</span></span><span style="display:flex;"><span>ax<span style="color:#f92672">.</span>yaxis<span style="color:#f92672">.</span>set_major_locator(MaxNLocator(integer<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>))
</span></span><span style="display:flex;"><span>ax<span style="color:#f92672">.</span>set(xlabel<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Position&#39;</span>, ylabel<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Count of players&#39;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>title(<span style="color:#e6db74">&#34;Top 10 Position based on player representation (count)&#34;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>show()
</span></span></code></pre></div><p><img src="/img/output_37_0.png" alt="png"></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>position_grouped <span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>groupby([<span style="color:#e6db74">&#39;Position&#39;</span>])[[<span style="color:#e6db74">&#39;Markey Value In Millions(£)&#39;</span>]]<span style="color:#f92672">.</span>sum()<span style="color:#f92672">.</span>sort_values(by<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Markey Value In Millions(£)&#39;</span>, ascending<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>)<span style="color:#f92672">.</span>head(<span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span>position_grouped
</span></span></code></pre></div><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Markey Value In Millions(£)</th>
    </tr>
    <tr>
      <th>Position</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Centre-Back</th>
      <td>2583.9</td>
    </tr>
    <tr>
      <th>Central Midfield</th>
      <td>2421.9</td>
    </tr>
    <tr>
      <th>Centre-Forward</th>
      <td>2369.7</td>
    </tr>
    <tr>
      <th>Left Winger</th>
      <td>1647.0</td>
    </tr>
    <tr>
      <th>Right Winger</th>
      <td>1461.6</td>
    </tr>
    <tr>
      <th>Attacking Midfield</th>
      <td>1332.0</td>
    </tr>
    <tr>
      <th>Defensive Midfield</th>
      <td>1275.3</td>
    </tr>
    <tr>
      <th>Right-Back</th>
      <td>784.8</td>
    </tr>
    <tr>
      <th>Left-Back</th>
      <td>704.7</td>
    </tr>
    <tr>
      <th>Goalkeeper</th>
      <td>585.9</td>
    </tr>
  </tbody>
</table>
</div>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>ax <span style="color:#f92672">=</span> sns<span style="color:#f92672">.</span>barplot(x<span style="color:#f92672">=</span>position_grouped<span style="color:#f92672">.</span>index, y<span style="color:#f92672">=</span>position_grouped[<span style="color:#e6db74">&#39;Markey Value In Millions(£)&#39;</span>]) 
</span></span><span style="display:flex;"><span>ax<span style="color:#f92672">.</span>tick_params(axis<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;x&#39;</span>, rotation<span style="color:#f92672">=</span><span style="color:#ae81ff">45</span>)
</span></span><span style="display:flex;"><span>ax<span style="color:#f92672">.</span>set(xlabel<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Position&#39;</span>, ylabel<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Markey Value In Millions(£)&#39;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>title(<span style="color:#e6db74">&#34;Top 10 Position based on total market value&#34;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>show()
</span></span></code></pre></div><p><img src="/img/output_39_0.png" alt="png"></p>
<h1 id="3-feature-engineering">3. Feature Engineering</h1>
<p>Since we only have 500 rows of data, 10 different positions, let us aggregate some of these positions together.</p>
<p>I created a simple position mapping and transformed it so that it was possible to use <code>map</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>position_mapping <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;forward&#34;</span> : [<span style="color:#e6db74">&#39;Centre-Forward&#39;</span>, <span style="color:#e6db74">&#39;Second Striker&#39;</span>], 
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;midfield&#34;</span> : [<span style="color:#e6db74">&#39;Central Midfield&#39;</span>, <span style="color:#e6db74">&#39;Attacking Midfield&#39;</span>, <span style="color:#e6db74">&#39;Defensive Midfield&#39;</span>, <span style="color:#e6db74">&#39;Left Midfield&#39;</span>, <span style="color:#e6db74">&#39;Right Midfield&#39;</span>, <span style="color:#e6db74">&#39;Right Winger&#39;</span>, <span style="color:#e6db74">&#39;Left Winger&#39;</span>],
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;back&#34;</span> : [<span style="color:#e6db74">&#39;Centre-Back&#39;</span>, <span style="color:#e6db74">&#39;Right-Back&#39;</span>, <span style="color:#e6db74">&#39;Left-Back&#39;</span>]
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>The only position we have not mapped here is <code>Goalkeeper</code>, which we will remove later on.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>mapping_dict <span style="color:#f92672">=</span> {}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> key <span style="color:#f92672">in</span> position_mapping:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> item <span style="color:#f92672">in</span> position_mapping[key]:
</span></span><span style="display:flex;"><span>        mapping_dict[item] <span style="color:#f92672">=</span> key
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>mapping_dict
</span></span></code></pre></div><pre><code>{'Centre-Forward': 'forward',
 'Second Striker': 'forward',
 'Central Midfield': 'midfield',
 'Attacking Midfield': 'midfield',
 'Defensive Midfield': 'midfield',
 'Left Midfield': 'midfield',
 'Right Midfield': 'midfield',
 'Right Winger': 'midfield',
 'Left Winger': 'midfield',
 'Centre-Back': 'back',
 'Right-Back': 'back',
 'Left-Back': 'back'}
</code></pre>
<p>I could have just typed in the mapping_dict directly but this felt more natural.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df[<span style="color:#e6db74">&#39;Position_Agg&#39;</span>] <span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>Position<span style="color:#f92672">.</span>map(mapping_dict) 
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df
</span></span></code></pre></div><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Name</th>
      <th>Position</th>
      <th>Age</th>
      <th>Markey Value In Millions(£)</th>
      <th>Country</th>
      <th>Club</th>
      <th>Matches</th>
      <th>Goals</th>
      <th>Own Goals</th>
      <th>Assists</th>
      <th>Yellow Cards</th>
      <th>Second Yellow Cards</th>
      <th>Red Cards</th>
      <th>Number Of Substitute In</th>
      <th>Number Of Substitute Out</th>
      <th>Position_Agg</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Kylian Mbappé</td>
      <td>Centre-Forward</td>
      <td>22</td>
      <td>144.0</td>
      <td>France</td>
      <td>Paris Saint-Germain</td>
      <td>16</td>
      <td>7</td>
      <td>0</td>
      <td>11</td>
      <td>3</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>8</td>
      <td>forward</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Erling Haaland</td>
      <td>Centre-Forward</td>
      <td>21</td>
      <td>135.0</td>
      <td>Norway</td>
      <td>Borussia Dortmund</td>
      <td>10</td>
      <td>13</td>
      <td>0</td>
      <td>4</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>forward</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Harry Kane</td>
      <td>Centre-Forward</td>
      <td>28</td>
      <td>108.0</td>
      <td>England</td>
      <td>Tottenham Hotspur</td>
      <td>16</td>
      <td>7</td>
      <td>0</td>
      <td>2</td>
      <td>2</td>
      <td>0</td>
      <td>0</td>
      <td>2</td>
      <td>2</td>
      <td>forward</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Jack Grealish</td>
      <td>Left Winger</td>
      <td>26</td>
      <td>90.0</td>
      <td>England</td>
      <td>Manchester City</td>
      <td>15</td>
      <td>2</td>
      <td>0</td>
      <td>3</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>2</td>
      <td>8</td>
      <td>midfield</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Mohamed Salah</td>
      <td>Right Winger</td>
      <td>29</td>
      <td>90.0</td>
      <td>Egypt</td>
      <td>Liverpool FC</td>
      <td>15</td>
      <td>15</td>
      <td>0</td>
      <td>6</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>3</td>
      <td>midfield</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>495</th>
      <td>Giorgian de Arrascaeta</td>
      <td>Attacking Midfield</td>
      <td>27</td>
      <td>16.2</td>
      <td>Uruguay</td>
      <td>Clube de Regatas do Flamengo</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>midfield</td>
    </tr>
    <tr>
      <th>496</th>
      <td>Ayoze Pérez</td>
      <td>Second Striker</td>
      <td>28</td>
      <td>16.2</td>
      <td>Spain</td>
      <td>Leicester City</td>
      <td>8</td>
      <td>1</td>
      <td>0</td>
      <td>3</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>2</td>
      <td>5</td>
      <td>forward</td>
    </tr>
    <tr>
      <th>497</th>
      <td>Alex Meret</td>
      <td>Goalkeeper</td>
      <td>24</td>
      <td>16.2</td>
      <td>Italy</td>
      <td>SSC Napoli</td>
      <td>5</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>498</th>
      <td>Duje Caleta-Car</td>
      <td>Centre-Back</td>
      <td>25</td>
      <td>16.2</td>
      <td>Croatia</td>
      <td>Olympique Marseille</td>
      <td>8</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>2</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>2</td>
      <td>back</td>
    </tr>
    <tr>
      <th>499</th>
      <td>Aritz Elustondo</td>
      <td>Centre-Back</td>
      <td>27</td>
      <td>16.2</td>
      <td>Spain</td>
      <td>Real Sociedad</td>
      <td>15</td>
      <td>3</td>
      <td>0</td>
      <td>1</td>
      <td>4</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>back</td>
    </tr>
  </tbody>
</table>
<p>500 rows × 16 columns</p>
</div>
<p>Now we can remove goalkeepers (which are NaNs because of missing mapping)</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df<span style="color:#f92672">.</span>dropna(inplace<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>)
</span></span></code></pre></div><p>Let&rsquo;s create similar charts for the new column as well</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df<span style="color:#f92672">.</span>groupby(<span style="color:#e6db74">&#39;Position_Agg&#39;</span>)<span style="color:#f92672">.</span>size()<span style="color:#f92672">.</span>sort_values(ascending<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>)
</span></span></code></pre></div><pre><code>Position_Agg
midfield    263
back        140
forward      78
dtype: int64
</code></pre>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>ax <span style="color:#f92672">=</span> sns<span style="color:#f92672">.</span>countplot(x<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Position_Agg&#39;</span>, data<span style="color:#f92672">=</span>df, order<span style="color:#f92672">=</span>df<span style="color:#f92672">.</span>Position_Agg<span style="color:#f92672">.</span>value_counts()<span style="color:#f92672">.</span>iloc[:<span style="color:#ae81ff">10</span>]<span style="color:#f92672">.</span>index) 
</span></span><span style="display:flex;"><span>ax<span style="color:#f92672">.</span>tick_params(axis<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;x&#39;</span>, rotation<span style="color:#f92672">=</span><span style="color:#ae81ff">45</span>)
</span></span><span style="display:flex;"><span>ax<span style="color:#f92672">.</span>yaxis<span style="color:#f92672">.</span>set_major_locator(MaxNLocator(integer<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>))
</span></span><span style="display:flex;"><span>ax<span style="color:#f92672">.</span>set(xlabel<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Position&#39;</span>, ylabel<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Count of players&#39;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>title(<span style="color:#e6db74">&#34;Top 10 Position based on player representation&#34;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>show()
</span></span></code></pre></div><p><img src="/img/output_54_0.png" alt="png"></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>position_agg_grouped <span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>groupby([<span style="color:#e6db74">&#39;Position_Agg&#39;</span>])[[<span style="color:#e6db74">&#39;Markey Value In Millions(£)&#39;</span>]]<span style="color:#f92672">.</span>sum()<span style="color:#f92672">.</span>sort_values(by<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Markey Value In Millions(£)&#39;</span>, ascending<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>)<span style="color:#f92672">.</span>head(<span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span>position_agg_grouped
</span></span></code></pre></div><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Markey Value In Millions(£)</th>
    </tr>
    <tr>
      <th>Position_Agg</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>midfield</th>
      <td>8460.0</td>
    </tr>
    <tr>
      <th>back</th>
      <td>4073.4</td>
    </tr>
    <tr>
      <th>forward</th>
      <td>2649.6</td>
    </tr>
  </tbody>
</table>
</div>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>ax <span style="color:#f92672">=</span> sns<span style="color:#f92672">.</span>barplot(x<span style="color:#f92672">=</span>position_agg_grouped<span style="color:#f92672">.</span>index, y<span style="color:#f92672">=</span>position_agg_grouped[<span style="color:#e6db74">&#39;Markey Value In Millions(£)&#39;</span>]) 
</span></span><span style="display:flex;"><span>ax<span style="color:#f92672">.</span>tick_params(axis<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;x&#39;</span>, rotation<span style="color:#f92672">=</span><span style="color:#ae81ff">45</span>)
</span></span><span style="display:flex;"><span>ax<span style="color:#f92672">.</span>set(xlabel<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Position&#39;</span>, ylabel<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Markey Value In Millions(£)&#39;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>title(<span style="color:#e6db74">&#34;Top 10 Position based on total market value&#34;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>show()
</span></span></code></pre></div><p><img src="/img/output_56_0.png" alt="png"></p>
<h1 id="4-linear-regression">4. Linear Regression</h1>
<p>First of all, let us only focus on the midfield players. Midfield is the largest group of players we have, and it might make more sense to use regression the same group of players.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df_mid <span style="color:#f92672">=</span> df[df<span style="color:#f92672">.</span>Position_Agg<span style="color:#f92672">==</span><span style="color:#e6db74">&#39;midfield&#39;</span>]
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df_mid<span style="color:#f92672">.</span>reset_index(drop<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>, inplace<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>list(df_mid)
</span></span></code></pre></div><pre><code>['Name',
 'Position',
 'Age',
 'Markey Value In Millions(£)',
 'Country',
 'Club',
 'Matches',
 'Goals',
 'Own Goals',
 'Assists',
 'Yellow Cards',
 'Second Yellow Cards',
 'Red Cards',
 'Number Of Substitute In',
 'Number Of Substitute Out',
 'Position_Agg']
</code></pre>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df_mid <span style="color:#f92672">=</span> df_mid[[<span style="color:#e6db74">&#39;Age&#39;</span>, <span style="color:#e6db74">&#39;Goals&#39;</span>, <span style="color:#e6db74">&#39;Assists&#39;</span>, <span style="color:#e6db74">&#39;Markey Value In Millions(£)&#39;</span>]]
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df_mid <span style="color:#f92672">=</span> df_mid<span style="color:#f92672">.</span>apply(<span style="color:#66d9ef">lambda</span> x: x<span style="color:#f92672">/</span>x<span style="color:#f92672">.</span>max(), axis<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df_mid
</span></span></code></pre></div><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Age</th>
      <th>Goals</th>
      <th>Assists</th>
      <th>Markey Value In Millions(£)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.764706</td>
      <td>0.133333</td>
      <td>0.3</td>
      <td>1.00</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.852941</td>
      <td>1.000000</td>
      <td>0.6</td>
      <td>1.00</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0.882353</td>
      <td>0.200000</td>
      <td>0.1</td>
      <td>1.00</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0.852941</td>
      <td>0.200000</td>
      <td>0.3</td>
      <td>1.00</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0.617647</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.90</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>258</th>
      <td>0.676471</td>
      <td>0.066667</td>
      <td>0.1</td>
      <td>0.18</td>
    </tr>
    <tr>
      <th>259</th>
      <td>0.764706</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.18</td>
    </tr>
    <tr>
      <th>260</th>
      <td>0.823529</td>
      <td>0.000000</td>
      <td>0.1</td>
      <td>0.18</td>
    </tr>
    <tr>
      <th>261</th>
      <td>0.764706</td>
      <td>0.200000</td>
      <td>0.1</td>
      <td>0.18</td>
    </tr>
    <tr>
      <th>262</th>
      <td>0.794118</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.18</td>
    </tr>
  </tbody>
</table>
<p>263 rows × 4 columns</p>
</div>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>X <span style="color:#f92672">=</span> df_mid<span style="color:#f92672">.</span>iloc[:, :<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>]
</span></span><span style="display:flex;"><span>y <span style="color:#f92672">=</span> df_mid<span style="color:#f92672">.</span>iloc[:, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>]
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>linear_regressor <span style="color:#f92672">=</span> LinearRegression()<span style="color:#f92672">.</span>fit(X, y)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>linear_regressor<span style="color:#f92672">.</span>score(X, y)
</span></span></code></pre></div><pre><code>0.06775382996413992
</code></pre>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>linear_regressor<span style="color:#f92672">.</span>predict(X)
</span></span></code></pre></div><pre><code>array([0.37728587, 0.61138884, 0.3870485 , 0.40721923, 0.28447775,
       0.326131  , 0.4879743 , 0.40387802, 0.36451519, 0.34205403,
       0.4380145 , 0.42209148, 0.26836585, 0.40466779, 0.3113309 ,
       0.39576034, 0.35685413, 0.39922502, 0.36962481, 0.31978173,
       0.3962891 , 0.36759539, 0.3706756 , 0.41769948, 0.37093661,
       0.47298534, 0.36451519, 0.34021348, 0.45451087, 0.33229141,
       0.30798969, 0.39103519, 0.34179302, 0.30058964, 0.34866431,
       0.5442388 , 0.41146694, 0.34021348, 0.31415009, 0.32823257,
       0.38036608, 0.34637388, 0.34663489, 0.3274428 , 0.37473444,
       0.34716365, 0.33871282, 0.49826569, 0.30904047, 0.32718179,
       0.30798969, 0.30058964, 0.38370729, 0.45300347, 0.54202051,
       0.32823257, 0.38573671, 0.408009  , 0.39110734, 0.45484402,
       0.39549933, 0.38167787, 0.39437641, 0.31415009, 0.42385989,
       0.35174451, 0.3144111 , 0.4689265 , 0.32921121, 0.39523832,
       0.33255242, 0.37296602, 0.31644052, 0.3422429 , 0.33589363,
       0.36451519, 0.35174451, 0.36680562, 0.32410158, 0.37525645,
       0.40616845, 0.39136835, 0.32181115, 0.36248577, 0.28447775,
       0.32076037, 0.42183047, 0.31106989, 0.31212067, 0.31952073,
       0.36222476, 0.38986769, 0.33995247, 0.30596027, 0.36346441,
       0.32718179, 0.30058964, 0.36019534, 0.35711514, 0.3484033 ,
       0.4241209 , 0.30032863, 0.41567006, 0.36969696, 0.32384057,
       0.36556597, 0.37525645, 0.36988582, 0.31670153, 0.40669721,
       0.31741916, 0.36444305, 0.34401131, 0.33890169, 0.40590744,
       0.31336032, 0.36654461, 0.32947222, 0.31336032, 0.34637388,
       0.36248577, 0.30596027, 0.35711514, 0.35711514, 0.32410158,
       0.36346441, 0.40079782, 0.38265651, 0.34761353, 0.37859767,
       0.35200552, 0.29829921, 0.39294789, 0.30261906, 0.30058964,
       0.3144111 , 0.38573671, 0.35050486, 0.40151545, 0.34100325,
       0.31336032, 0.37735802, 0.27373649, 0.3144111 , 0.330523  ,
       0.27576591, 0.26836585, 0.29521901, 0.41638769, 0.4781671 ,
       0.40571857, 0.43238286, 0.31873095, 0.39726774, 0.34637388,
       0.42288125, 0.3113309 , 0.42175832, 0.32286194, 0.35050486,
       0.32286194, 0.30596027, 0.43257173, 0.30058964, 0.45052417,
       0.35174451, 0.39313676, 0.38802714, 0.34126426, 0.40079782,
       0.3678564 , 0.40721923, 0.34558411, 0.34558411, 0.36222476,
       0.3366834 , 0.47095592, 0.38900577, 0.38960668, 0.3706756 ,
       0.4166487 , 0.34663489, 0.30569926, 0.29724843, 0.35482471,
       0.36962481, 0.48876408, 0.29829921, 0.33255242, 0.3422429 ,
       0.28984838, 0.30904047, 0.34408345, 0.40590744, 0.30904047,
       0.31336032, 0.34637388, 0.33589363, 0.31670153, 0.36248577,
       0.34558411, 0.3274428 , 0.33897383, 0.3854757 , 0.47167354,
       0.28650717, 0.28447775, 0.3484033 , 0.29521901, 0.30261906,
       0.30366984, 0.35685413, 0.32384057, 0.32718179, 0.40676935,
       0.38678749, 0.33995247, 0.28984838, 0.3144111 , 0.29521901,
       0.30596027, 0.31873095, 0.31336032, 0.3113309 , 0.30798969,
       0.31873095, 0.33484285, 0.33890169, 0.35174451, 0.39005656,
       0.37191524, 0.31670153, 0.41893913, 0.3113309 , 0.40827001,
       0.40086996, 0.34021348, 0.35940557, 0.37525645, 0.34126426,
       0.38494693, 0.39136835, 0.41488029, 0.35606436, 0.31415009,
       0.36943595, 0.31846994, 0.38141686, 0.36864618, 0.28447775,
       0.31538974, 0.29521901, 0.36969696, 0.30904047, 0.330523  ,
       0.39850739, 0.31336032, 0.30596027, 0.32181115, 0.3113309 ,
       0.33484285, 0.36556597, 0.31670153])
</code></pre>
<h1 id="5-decision-tree-regressor">5. Decision Tree Regressor</h1>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>decision_tree_regressor <span style="color:#f92672">=</span> DecisionTreeRegressor(random_state<span style="color:#f92672">=</span><span style="color:#ae81ff">42</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>decision_tree_regressor<span style="color:#f92672">.</span>fit(X, y)
</span></span></code></pre></div><pre><code>DecisionTreeRegressor(random_state=42)
</code></pre>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>decision_tree_regressor<span style="color:#f92672">.</span>predict(X)
</span></span></code></pre></div><pre><code>array([1.        , 1.        , 1.        , 0.625     , 0.4075    ,
       0.9       , 0.9       , 0.9       , 0.66666667, 0.85      ,
       0.85      , 0.85      , 0.525     , 0.8       , 0.326     ,
       0.8       , 0.475     , 0.7       , 0.46      , 0.7       ,
       0.7       , 0.7       , 0.465     , 0.7       , 0.7       ,
       0.7       , 0.66666667, 0.5       , 0.65      , 0.65      ,
       0.45      , 0.65      , 0.6       , 0.396     , 0.6       ,
       0.6       , 0.6       , 0.5       , 0.38333333, 0.5       ,
       0.55      , 0.33      , 0.39      , 0.385     , 0.5       ,
       0.5       , 0.5       , 0.5       , 0.28      , 0.35      ,
       0.45      , 0.396     , 0.5       , 0.48      , 0.47      ,
       0.5       , 0.365     , 0.45      , 0.45      , 0.45      ,
       0.45      , 0.45      , 0.45      , 0.38333333, 0.42      ,
       0.3175    , 0.29      , 0.42      , 0.4       , 0.4       ,
       0.31      , 0.4       , 0.4       , 0.31      , 0.31      ,
       0.66666667, 0.3175    , 0.4       , 0.35      , 0.30666667,
       0.4       , 0.3       , 0.28      , 0.3       , 0.4075    ,
       0.35      , 0.35      , 0.35      , 0.35      , 0.35      ,
       0.295     , 0.35      , 0.275     , 0.256     , 0.325     ,
       0.35      , 0.396     , 0.35      , 0.31666667, 0.275     ,
       0.35      , 0.33      , 0.33      , 0.25      , 0.26      ,
       0.25      , 0.30666667, 0.32      , 0.23      , 0.3       ,
       0.3       , 0.3       , 0.3       , 0.25      , 0.26      ,
       0.245     , 0.3       , 0.3       , 0.245     , 0.33      ,
       0.3       , 0.256     , 0.31666667, 0.31666667, 0.35      ,
       0.325     , 0.275     , 0.3       , 0.3       , 0.3       ,
       0.3       , 0.25      , 0.28      , 0.24      , 0.396     ,
       0.29      , 0.365     , 0.26      , 0.27      , 0.27      ,
       0.245     , 0.27      , 0.26      , 0.29      , 0.22      ,
       0.25      , 0.525     , 0.2075    , 0.25      , 0.25      ,
       0.25      , 0.25      , 0.21666667, 0.25      , 0.33      ,
       0.25      , 0.326     , 0.25      , 0.25      , 0.26      ,
       0.25      , 0.256     , 0.25      , 0.396     , 0.25      ,
       0.3175    , 0.25      , 0.25      , 0.225     , 0.275     ,
       0.25      , 0.625     , 0.24      , 0.24      , 0.295     ,
       0.24      , 0.24      , 0.24      , 0.23      , 0.465     ,
       0.23      , 0.39      , 0.22      , 0.22      , 0.22      ,
       0.46      , 0.22      , 0.25      , 0.31      , 0.31      ,
       0.21      , 0.28      , 0.22      , 0.26      , 0.28      ,
       0.245     , 0.33      , 0.31      , 0.23      , 0.3       ,
       0.24      , 0.385     , 0.21      , 0.2       , 0.2       ,
       0.2       , 0.4075    , 0.275     , 0.2075    , 0.24      ,
       0.2       , 0.475     , 0.26      , 0.35      , 0.2       ,
       0.2       , 0.275     , 0.21      , 0.29      , 0.2075    ,
       0.256     , 0.21666667, 0.245     , 0.326     , 0.45      ,
       0.21666667, 0.19      , 0.25      , 0.3175    , 0.2       ,
       0.2       , 0.23      , 0.2       , 0.326     , 0.2       ,
       0.2       , 0.5       , 0.2       , 0.30666667, 0.225     ,
       0.2       , 0.3       , 0.2       , 0.19      , 0.38333333,
       0.18      , 0.18      , 0.18      , 0.18      , 0.4075    ,
       0.18      , 0.2075    , 0.25      , 0.28      , 0.22      ,
       0.18      , 0.245     , 0.256     , 0.28      , 0.326     ,
       0.19      , 0.25      , 0.23      ])
</code></pre>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>decision_tree_regressor<span style="color:#f92672">.</span>score(X, y)
</span></span></code></pre></div><pre><code>0.7410570792901311
</code></pre>
<h1 id="6-validation">6. Validation</h1>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> sklearn.model_selection <span style="color:#f92672">import</span> train_test_split
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>X_train, X_test, y_train, y_test <span style="color:#f92672">=</span> train_test_split(X, y, test_size<span style="color:#f92672">=</span><span style="color:#ae81ff">0.1</span>, random_state<span style="color:#f92672">=</span><span style="color:#ae81ff">42</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>decision_tree_regressor <span style="color:#f92672">=</span> DecisionTreeRegressor(random_state<span style="color:#f92672">=</span><span style="color:#ae81ff">42</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>decision_tree_regressor<span style="color:#f92672">.</span>fit(X_train, y_train)
</span></span></code></pre></div><pre><code>DecisionTreeRegressor(random_state=42)
</code></pre>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>decision_tree_regressor<span style="color:#f92672">.</span>score(X_train, y_train)
</span></span></code></pre></div><pre><code>0.7325965837309238
</code></pre>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>decision_tree_regressor<span style="color:#f92672">.</span>score(X_test, y_test)
</span></span></code></pre></div><pre><code>-1.0994712392955237
</code></pre>
<h1 id="7-conclusion">7. Conclusion</h1>
<h3 id="the-trap">The Trap</h3>
<p>The trap here is using same data for training and validation. As a beginner, it is common to look into a few models (here we looked into Linear Regression and Decision Tree Regressor), and concluded one is better than the other because the latter had a good determination coefficient score.</p>
<p>However, after validation we realize that the Decision Tree Regressor is up to no good.</p>
<p><a href="https://scikit-learn.org/stable/modules/generated/sklearn.tree.DecisionTreeRegressor.html#sklearn.tree.DecisionTreeRegressor.score">https://scikit-learn.org/stable/modules/generated/sklearn.tree.DecisionTreeRegressor.html#sklearn.tree.DecisionTreeRegressor.score</a></p>
<p>The score is negative, and based on the documentation above:</p>
<blockquote>
<p>The best possible score is 1.0 and it can be negative (because the model can be arbitrarily worse)</p>
</blockquote>
<p>This is just a very basic example of misjudgement on my side. As a peer reviewer, you might feel like this is something very trivial. Finally, I just demonstrated one example here. There are pleanty of these in analytics.</p>
</div>
	</section>

</article>

		</main>
		<aside role="contentinfo"
			class="w-full md:w-2/5 xl:w-1/2 md:pr-12 lg:pr-20 xl:pr-24 order-4 md:order-3 md:sticky md:bottom-0 self-end max-w-2xl">
			<div class="md:float-right md:text-right leading-loose tracking-tight md:mb-2">
				
	<div class="md:max-w-xs  flex flex-col md:items-end">
	<ul class="font-serif flex-grow-0 flex justify-between flex-wrap md:flex-col">
	
	
	<li class="px-1 md:px-0">
		<a href="/posts/" title="Posts page" 
			class="font-medium text-medium-red-violet-600 hover:text-medium-red-violet-400" >
			Posts
		</a>
	</li>
	
	<li class="px-1 md:px-0">
		<a href="/resume/" title="Resume page" >
			Resume
		</a>
	</li>
	
	<li class="px-1 md:px-0">
		<a href="/certifications/" title="Certifications page" >
			Certifications
		</a>
	</li>
	
	<li class="px-1 md:px-0">
		<a href="/publications/" title="Publications page" >
			Publications
		</a>
	</li>
	
	<li class="px-1 md:px-0">
		<a href="/tags/" title="Tags page" >
			Tags
		</a>
	</li>
	
	<li class="px-1 md:px-0">
		<a href="/categories/" title="Categories page" >
			Categories
		</a>
	</li>
	
	
	
	
	<div id="fastSearch" class="m-0">
		<input id="searchInput" type="text" size=10 
			class="bg-gray-100 focus:outline-none border-b border-gray-100 focus:border-eucalyptus-300 md:text-right
			placeholder-java-500 min-w-0 max-w-xxxs"
			placeholder="search" />
		<ul id="searchResults" class="bg-gray-200 px-2 divide-y divide-gray-400">
		</ul>
	</div>
	
</ul>
	

<div class="flex flex-wrap-reverse md:justify-end content-end md:content-start justify-start items-start md:flex-col  max-h-16">
	
	<a href='https://github.com/ayushsubedi' target="_blank" class="github icon pl-1 text-eucalyptus-400 hover:text-java-400" title="github link" rel="noopener"
		aria-label="follow on github——Opens in a new window">
		
		<div class="fill-current h-8 w-8">
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <g>
        <path fill="none" d="M0 0h24v24H0z"/>
        <path fill-rule="nonzero" d="M5.883 18.653c-.3-.2-.558-.455-.86-.816a50.32 50.32 0 0 1-.466-.579c-.463-.575-.755-.84-1.057-.949a1 1 0 0 1 .676-1.883c.752.27 1.261.735 1.947 1.588-.094-.117.34.427.433.539.19.227.33.365.44.438.204.137.587.196 1.15.14.023-.382.094-.753.202-1.095C5.38 15.31 3.7 13.396 3.7 9.64c0-1.24.37-2.356 1.058-3.292-.218-.894-.185-1.975.302-3.192a1 1 0 0 1 .63-.582c.081-.024.127-.035.208-.047.803-.123 1.937.17 3.415 1.096A11.731 11.731 0 0 1 12 3.315c.912 0 1.818.104 2.684.308 1.477-.933 2.613-1.226 3.422-1.096.085.013.157.03.218.05a1 1 0 0 1 .616.58c.487 1.216.52 2.297.302 3.19.691.936 1.058 2.045 1.058 3.293 0 3.757-1.674 5.665-4.642 6.392.125.415.19.879.19 1.38a300.492 300.492 0 0 1-.012 2.716 1 1 0 0 1-.019 1.958c-1.139.228-1.983-.532-1.983-1.525l.002-.446.005-.705c.005-.708.007-1.338.007-1.998 0-.697-.183-1.152-.425-1.36-.661-.57-.326-1.655.54-1.752 2.967-.333 4.337-1.482 4.337-4.66 0-.955-.312-1.744-.913-2.404a1 1 0 0 1-.19-1.045c.166-.414.237-.957.096-1.614l-.01.003c-.491.139-1.11.44-1.858.949a1 1 0 0 1-.833.135A9.626 9.626 0 0 0 12 5.315c-.89 0-1.772.119-2.592.35a1 1 0 0 1-.83-.134c-.752-.507-1.374-.807-1.868-.947-.144.653-.073 1.194.092 1.607a1 1 0 0 1-.189 1.045C6.016 7.89 5.7 8.694 5.7 9.64c0 3.172 1.371 4.328 4.322 4.66.865.097 1.201 1.177.544 1.748-.192.168-.429.732-.429 1.364v3.15c0 .986-.835 1.725-1.96 1.528a1 1 0 0 1-.04-1.962v-.99c-.91.061-1.662-.088-2.254-.485z"/>
    </g>
</svg>

		</div>
	</a>
	
	<a href='https://www.instagram.com/ayushsube_fit/' target="_blank" class="instagram icon pl-1 text-eucalyptus-400 hover:text-java-400" title="instagram link" rel="noopener"
		aria-label="follow on instagram——Opens in a new window">
		
		<div class="fill-current h-8 w-8">
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <g>
        <path fill="none" d="M0 0h24v24H0z"/>
        <path fill-rule="nonzero" d="M12 9a3 3 0 1 0 0 6 3 3 0 0 0 0-6zm0-2a5 5 0 1 1 0 10 5 5 0 0 1 0-10zm6.5-.25a1.25 1.25 0 0 1-2.5 0 1.25 1.25 0 0 1 2.5 0zM12 4c-2.474 0-2.878.007-4.029.058-.784.037-1.31.142-1.798.332-.434.168-.747.369-1.08.703a2.89 2.89 0 0 0-.704 1.08c-.19.49-.295 1.015-.331 1.798C4.006 9.075 4 9.461 4 12c0 2.474.007 2.878.058 4.029.037.783.142 1.31.331 1.797.17.435.37.748.702 1.08.337.336.65.537 1.08.703.494.191 1.02.297 1.8.333C9.075 19.994 9.461 20 12 20c2.474 0 2.878-.007 4.029-.058.782-.037 1.309-.142 1.797-.331.433-.169.748-.37 1.08-.702.337-.337.538-.65.704-1.08.19-.493.296-1.02.332-1.8.052-1.104.058-1.49.058-4.029 0-2.474-.007-2.878-.058-4.029-.037-.782-.142-1.31-.332-1.798a2.911 2.911 0 0 0-.703-1.08 2.884 2.884 0 0 0-1.08-.704c-.49-.19-1.016-.295-1.798-.331C14.925 4.006 14.539 4 12 4zm0-2c2.717 0 3.056.01 4.122.06 1.065.05 1.79.217 2.428.465.66.254 1.216.598 1.772 1.153a4.908 4.908 0 0 1 1.153 1.772c.247.637.415 1.363.465 2.428.047 1.066.06 1.405.06 4.122 0 2.717-.01 3.056-.06 4.122-.05 1.065-.218 1.79-.465 2.428a4.883 4.883 0 0 1-1.153 1.772 4.915 4.915 0 0 1-1.772 1.153c-.637.247-1.363.415-2.428.465-1.066.047-1.405.06-4.122.06-2.717 0-3.056-.01-4.122-.06-1.065-.05-1.79-.218-2.428-.465a4.89 4.89 0 0 1-1.772-1.153 4.904 4.904 0 0 1-1.153-1.772c-.248-.637-.415-1.363-.465-2.428C2.013 15.056 2 14.717 2 12c0-2.717.01-3.056.06-4.122.05-1.066.217-1.79.465-2.428a4.88 4.88 0 0 1 1.153-1.772A4.897 4.897 0 0 1 5.45 2.525c.638-.248 1.362-.415 2.428-.465C8.944 2.013 9.283 2 12 2z"/>
    </g>
</svg>

		</div>
	</a>
	
	<a href='https://www.linkedin.com/in/ayush-subedi/' target="_blank" class="linkedin icon pl-1 text-eucalyptus-400 hover:text-java-400" title="linkedin link" rel="noopener"
		aria-label="follow on linkedin——Opens in a new window">
		
		<div class="fill-current h-8 w-8">
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <g>
        <path fill="none" d="M0 0h24v24H0z"/>
        <path d="M12 9.55C12.917 8.613 14.111 8 15.5 8a5.5 5.5 0 0 1 5.5 5.5V21h-2v-7.5a3.5 3.5 0 0 0-7 0V21h-2V8.5h2v1.05zM5 6.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm-1 2h2V21H4V8.5z"/>
    </g>
</svg>

		</div>
	</a>
	
	<a href='mailto:ayush.subedi@gmail.com' target="_blank" class="mail icon pl-1 text-eucalyptus-400 hover:text-java-400" title="mail link" rel="noopener"
		aria-label="follow on mail——Opens in a new window">
		
		<div class="fill-current h-8 w-8">
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <g>
        <path fill="none" d="M0 0h24v24H0z"/>
        <path d="M3 3h18a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1zm17 4.238l-7.928 7.1L4 7.216V19h16V7.238zM4.511 5l7.55 6.662L19.502 5H4.511z"/>
    </g>
</svg>
		</div>
	</a>
	
	<a href='https://public.tableau.com/app/profile/ayush3339' target="_blank" class="tableau icon pl-1 text-eucalyptus-400 hover:text-java-400" title="tableau link" rel="noopener"
		aria-label="follow on tableau——Opens in a new window">
		
		<div class="fill-current h-8 w-8">
			<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M2 13H8V21H2V13ZM9 3H15V21H9V3ZM16 8H22V21H16V8Z"/></svg>
		</div>
	</a>
	
	<a href='https://twitter.com/ayushsubs' target="_blank" class="twitter icon pl-1 text-eucalyptus-400 hover:text-java-400" title="twitter link" rel="noopener"
		aria-label="follow on twitter——Opens in a new window">
		
		<div class="fill-current h-8 w-8">
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <g>
        <path fill="none" d="M0 0h24v24H0z"/>
        <path fill-rule="nonzero" d="M15.3 5.55a2.9 2.9 0 0 0-2.9 2.847l-.028 1.575a.6.6 0 0 1-.68.583l-1.561-.212c-2.054-.28-4.022-1.226-5.91-2.799-.598 3.31.57 5.603 3.383 7.372l1.747 1.098a.6.6 0 0 1 .034.993L7.793 18.17c.947.059 1.846.017 2.592-.131 4.718-.942 7.855-4.492 7.855-10.348 0-.478-1.012-2.141-2.94-2.141zm-4.9 2.81a4.9 4.9 0 0 1 8.385-3.355c.711-.005 1.316.175 2.669-.645-.335 1.64-.5 2.352-1.214 3.331 0 7.642-4.697 11.358-9.463 12.309-3.268.652-8.02-.419-9.382-1.841.694-.054 3.514-.357 5.144-1.55C5.16 15.7-.329 12.47 3.278 3.786c1.693 1.977 3.41 3.323 5.15 4.037 1.158.475 1.442.465 1.973.538z"/>
    </g>
</svg>

		</div>
	</a>
	
</div>
	<div class="text-sm text-gray-500 leading-tight a-gray">
		
		<br />
		2952 words in this page.
	</div>
</div>

			</div>
		</aside>
		<footer class="w-full md:w-3/5 xl:w-1/2 order-3 max-w-3xl md:order-4 pt-2">
			
<hr class="" />
<div class="flex flex-wrap justify-between pb-2 leading-loose font-serif">
    
    <a class="flex-grow-0" href="/posts/ride_hailing_analytics/">
        <svg class="fill-current inline-block h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24"
            height="24">
            <path fill="none" d="M0 0h24v24H0z" />
            <path d="M7.828 11H20v2H7.828l5.364 5.364-1.414 1.414L4 12l7.778-7.778 1.414 1.414z" /></svg>
        Analytics for Ride Hailing Services
    </a>
    
    
    <a class="flex-grow-0" href="/posts/cheers_ai_demo/">
        Diabetic Retinopathy and Glaucoma Detection (Cheers AI Demo)
        <svg class="fill-current inline-block h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24"
            height="24">
            <path fill="none" d="M0 0h24v24H0z" />
            <path d="M16.172 11l-5.364-5.364 1.414-1.414L20 12l-7.778 7.778-1.414-1.414L16.172 13H4v-2z" /></svg></a>
    
</div>
<div >



<div class="font-serif pb-2 flex align-start leading-loose">
	<span class="heading pr-6 leading-loose">Related</span>
	<span >
		
			<a href="/posts/ride_hailing_analytics/">Analytics for Ride Hailing Services</a>
		
</span>
</div>

</div>
<hr />
<div class="pb-2">
    
</div>
<hr />

		</footer>
		

<script src="/dist/app.js"></script>


<script src="/lib/fuse.min.js"></script> 
<script src="/lib/fastsearch.js"></script>

	</div>
</body>

</html>